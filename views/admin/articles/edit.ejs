<%- include('../../partials/navbar')%>
<%- include('../../partials/header')%>


<div class="container">

<hr>
<div class="card">
    <div class="card-header">
    <h2>Editar Artigo</h2>
    </div>
<div class="card-body">
    <form method="POST" action="/articles/update">
        <input name="id" type="hidden" value="<%= article.id %>">
        <input class="form-control" type="text" name="title" placeholder="Digite o titulo do artigo"><br>
        <textarea class="form-control" placeholder="Escreva o artigo aqui" name="body" id="article"></textarea>
        <br>
        <label>Categorias</label>
        <select name="category" class="form-control">   
            <% category.forEach(category=>{%>
                <% if(category.id == article.categoryId){ %>
                     <option value="<%= category.id %>" selected><%= category.title %></option>
                <%}else{%>
                    <option value="<%= category.id %>"><%= category.title %></option>
            <% } %>
            <% }) %>
        </select>
        <br>
        <button class="btn btn-primary">Atualizar </button>
    </form>
</div>
</div>
</div>
<br>
<div id="content" style="display: none;">
    <%- article.body %>
</div>
<%- include('../../partials/footer')%>


<script src="http://cdn.tinymce.com/4/tinymce.min.js"></script>
<script>tinymce.init({selector:'textarea', plugins:[
    'advlist autolink link image lists print preview hr searchreplace wordcount fullscreen inserdatetime media save table paste emoticons'],
    init_instance_callback:()=>{
        tinymce.get('article').setContent(document.getElementById('content').innerHTML)
    }
    });</script>
